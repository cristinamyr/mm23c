<!DOCTYPE html>
<html>
<head>
	<meta name="tipo_contenido" content="text/html;" http-equiv="content-type" charset="utf-8">
	<title>Preguntas</title>
	<link rel="stylesheet" type="text/css" href="estilos/style.css" />
	<link rel="stylesheet" 
		type="text/css" 
		media="only screen and (min-width: 530px) and (min-device-width: 481px)"
		href="estilos/wide.css" />
	<link rel="stylesheet" 
		type="text/css" 
		media="only screen and (max-width: 480px)"
		href="estilos/smartphone.css" />
</head>
<body>
	<div id="page-wrap">
		<header class="main" id="h1">
			<span class="right"><a href="registro">Registrarse</a></span>
			<span class="right"><a href="login">Login</a></span>
			<span class="right" style="display:none;"><a href="/logout">Logout</a></span>
			<h2>Quiz: el juego de las preguntas</h2>
		</header>
		<nav class="main" id="n1" role="navigation">
			<span><a href="layout.html">Inicio</a></spam>
			<span><a href="pregunta.html">Preguntas</a></spam>
			<span><a href="creditos.html">Creditos</a></spam>
		</nav>
		<section class="main" id="s1">
			<div>
				<form id="fpreguntas" name="preguntas" action="prueba.php" method="post" enctype="multipart/form-data">
					E-mail(*):<input type="text"  size="50" id="email" name="email"><br>
					Enunciado(*): <input type="text" size="80"  id="enunciado" name="enunciado"><br>
					Respuesta correcta(*): <input type="text" size="80" id="r_correcta" name="r_correcta"><br>
					Respuesta incorrecta 1(*): <input type="text" size="80"  id="r_inc_1" name="r_inc_1"><br>
					Respuesta incorrecta 2(*): <input type="text"  size="80" id="r_inc_2" name="r_inc_2"><br>
					Respuesta incorrecta 3(*): <input type="text"  size="80" id="r_inc_3" name="r_inc_3"><br>
					Complejidad de la pregunta entre 1 y 5(*): <input type="text"  size="10" id="complejidad" name="complejidad"><br>
					Tema de la pregunta(*): <input type="text" size="30"  id="tema" name="tema"><br>
					Imagen relacionada con la pregunta <input typ="uploadedfile" type="file" id="fichero" name="fichero"><br>
					<input type="submit" id="enviar" name="enviar"> <br>
				</form> 
			</div>
		</section>
		<footer class="main" id="f1">
			<p><a href="http://es.wikipedia.org/wiki/Quiz" target="_blank">Que es un Quiz?</a></p>
			<a href="https://github.com/cristinamyr/mm23c/tree/master/Lab2">Link GITHUB</a>
		</footer>
	</div>


	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript">
		$("#fpreguntas").on('submit', function(){
			var expr = /[a-zA-Z]+[0-9]{3}@ikasle\.ehu\.eu?s/
			var expr2 =/[1-5]/
			console.log()
			if (expr.test($("#email").val())==false){
				alert("Introduce un e-mail válido");	
				return false;
			} 
			else if ($("#enunciado").val().length == 0){
				alert("Introduce un enunciado");
				return false;
			} 
			else if ($("#enunciado").val().length < 10){
				alert("El enunciado tiene que tener al menos 10 caracteres");
				return false;
			} 
			else if ($("#r_correcta").val().length == 0){
				alert("Introduce la respuesta correcta");
				return false;
			} 
			else if ($("#r_inc_1").val().length == 0){
				alert("Introduce una respuesta");
				return false;
			} 
			else if ($("#r_inc_2").val().length == 0){
				alert("Introduce una respuesta");
				return false;
			} 
			else if ($("#r_inc_3").val().length == 0){
				alert("Introduce una respuesta");
				return false;
			} 
			else if (expr2.test($("#complejidad").val())==false){
				alert("La complejidad introducida es errónea");
				return false;
			} 
			else if ($("#tema").val().length == 0){
				alert("Introduce un tema");
				return false;
			} });

		$("#fichero").click(function(event){

			$("input[type=file]").change(function(event) {
		        readURL(this);
		    });
		    if(!$("#imagen").length){
				var $foto = $('<img id="imagen" src="" alt="imagen seleccionada por el usuario" width="250px">');
						    
	 			$("#fpreguntas").append($foto);
	 		}
		   
		    const readURL = (input) => {
 
		        if (input.files && input.files[0]) {
		            const reader = new FileReader();
		 
		            reader.onload = (e) => {
		                $('#imagen').attr('src', e.target.result);
		            }
		            reader.readAsDataURL(input.files[0]);
		       	}
			
			}
	    	
	        if(!$("#resetImg").length){
	        	var input = $("<input/>", {
					  type: "button",
					  id: "resetImg",
					  name: "quitar imagen",
					  value: "quitar imagen" 
				});
				$("#fpreguntas").append(input);					
		        $("#resetImg").bind("click", function(){ 
				$("#imagen").remove();
				$("#resetImg").remove();
				delete $('#imagen');
	    		delete $('#resetImg');
	    		$('#fichero').val("");} );
		    }
		});
	    
		

	</script>

</body>
</html>
